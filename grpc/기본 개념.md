# GRPC란

우선 RPC를 먼저 알고 넘어가야 한다. RPC(Remote Procedure Call)은 원래 분산환경 시스템에서 서로 다른 컴퓨터 프로그램들이 서로 다른 주소에서 서로를 호출하지만, 같은 주소에서 호출하는것처럼 작동하게 하는 원격 프로시져 프로토콜이다. grpc는 `proto`라는 규격으로 정해진 함수 호출을 통해 처리된다.

![[Pasted image 20220926001547.png]]
위 사진을 예제로 들면 Ruby Client는 통신하고 있는 C++ Service가 어느 위치에 있던, 어떤 코드로 작성되었던 간에 상관 없이 정해진 Proto라는 규격만 있으면 자유롭게 데이터를 주고 받을 수 있는 것이다. HTTP/2 레이어 위에서 `Protocol Buffers` 를 사용해 직렬화된 바이트 스트림으로 통신하므로 JSON 기반의 통신보다 더 가볍고 그만큼 통신 속도도 빠르다.

### 특징
-   원격지 프로시저를 수행하는 규칙 및 파라미터 전달을 위한 인터페이스로 `protocol buffer` 라는 오픈소스를 활용하고 있습니다.
-   Blocking & Non-Blocking 을 지원합니다.
-   HTTP/2 프로토콜을 사용합니다.
-   인증, 로드벨런싱, 트레이싱, 헬스체크 등을 제공합니다.
-   10개 언어에서 지원되는 라이브러리가 있습니다.

### 장점
1) 기존 REST API 보다 네트워크 응답속도가 약 7배정도 빠른것으로 알려져있다.
2) request, response 의 모델인 message 객체를 protobuf 파일로 정의하게 돼 스웨거 API 등을 통한 API 스펙 문서의 최신화에 신경쓰지 않아도 된다.
3) `HTTP/2 프로토콜` 을 사용하기에 새롭게 추가된 프로토콜의 기능을 활용할 수 있다.

### 단점
1) 일단 가장 크게 브라우저와 서버간은 gRPC통신이 아직 지원되지 않는다. 그래서 브라우저에서는 흔히 JSON으로 서버로 요청하면 서버는 grpc-gateway를 통해 protobuf 형식으로 데이터를 변환한 뒤에 사용하게 된다.
2) 그리고, 사람이 읽을 수 없는 데이터 형식이기 때문에 네트워크 단에서 데이터를 보고 싶으면 추가적인 작업들이 필요하다. 

이와 같이 gRPC에는 장단점들이 있지만, microservice 아키텍처에서는 서비스 단위로 호출을 많이 하기 때문에 REST 보다 gRPC 이 적합한 기술이기 때문에 단점이 있음에도 불구하고 많은 회사들이 해당 기술을 적용하고 있는 추세인 것이다.
